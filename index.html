<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jadwal Waktu Sholat</title>

  <!-- CSS -->
  <link href="bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">

  <!-- JS Libraries -->
  <script src="jquery.min.js"></script>
  <script src="bootstrap.min.js"></script>

  <!-- Blok Script Gabungan -->
<script>


  window.onload = function () {
   waktuSholat();
  };
   
  function checkTime(i) {
    return (i < 10) ? "0" + i : i;
  }

  function masehiKeHijriah(tgl) {
    const day = tgl.getDate();
    const month = tgl.getMonth() + 1;
    const year = tgl.getFullYear();
    const jd = Math.floor((1461 * (year + 4800 + Math.floor((month - 14) / 12))) / 4) +
      Math.floor((367 * (month - 2 - 12 * Math.floor((month - 14) / 12))) / 12) -
      Math.floor((3 * Math.floor(((year + 4900 + Math.floor((month - 14) / 12)) / 100))) / 4) +
      day - 32075;

    const l = jd - 1948440 + 10632;
    const n = Math.floor((l - 1) / 10631);
    const r = l - 10631 * n;
    const j = Math.floor((r - 1) / 354.36667);
    const i = r - Math.floor(j * 354.36667);
    const hijriYear = 30 * n + j;
    const hijriMonth = Math.floor((i - 1) / 29.5) + 1;
    const hijriDay = i - 29.5 * (hijriMonth - 1);

    const hijriMonths = [
      "Muharram", "Safar", "Rabiul Awal", "Rabiul Akhir", "Jumadil Awal", "Jumadil Akhir",
      "Rajab", "Sya'ban", "Ramadhan", "Syawal", "Dzulkaidah", "Dzulhijjah"
    ];

    return `${Math.floor(hijriDay)} ${hijriMonths[hijriMonth - 1]} ${hijriYear} H`;
  }

  async function waktuSholat() {
    const today = new Date();
    const year = today.getFullYear();
    const month = checkTime(today.getMonth() + 1);
    const date = checkTime(today.getDate());

    const fullDate = `${year}-${month}-${date}`;
    const h = checkTime(today.getHours());
    const m = checkTime(today.getMinutes());
    const s = checkTime(today.getSeconds());
    const nowTime = `${h}:${m}`;

    document.getElementById("jam").innerHTML = `${h}:${m}:${s}`;

    const hari = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
    const bulan = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli",
      "Agustus", "September", "Oktober", "November", "Desember"];
    document.getElementById("tanggal").innerHTML =
      `${hari[today.getDay()]}, ${today.getDate()} ${bulan[today.getMonth()]} ${today.getFullYear()}`;

    document.getElementById("hijriah").innerText = masehiKeHijriah(today);

    try {
      const response = await fetch(`https://api.myquran.com/v2/sholat/jadwal/0506/${year}/${month}/${date}`);
      const data = await response.json();
      const jadwal = data.data.jadwal;

      const times = {
        fajr: jadwal.subuh,
        sunrise: jadwal.terbit,
        dhuhr: jadwal.dzuhur,
        asr: jadwal.ashar,
        maghrib: jadwal.maghrib,
        isha: jadwal.isya,
      };

      document.getElementById("subuh").innerText = times.fajr;
      document.getElementById("terbit").innerText = times.sunrise;
      document.getElementById("zuhur").innerText = times.dhuhr;
      document.getElementById("ashar").innerText = times.asr;
      document.getElementById("maghrib").innerText = times.maghrib;
      document.getElementById("isya").innerText = times.isha;

      const highlight = (id, condition) => {
        document.getElementById(id).style.backgroundColor = condition ? "red" : "rgba(0, 0, 0, 0.6)";
      };

      highlight("csubuh", nowTime >= times.fajr && nowTime < times.sunrise);
      highlight("cterbit", nowTime >= times.sunrise && nowTime < times.dhuhr);
      highlight("czuhur", nowTime >= times.dhuhr && nowTime < times.asr);
      highlight("cashar", nowTime >= times.asr && nowTime < times.maghrib);
      highlight("cmaghrib", nowTime >= times.maghrib && nowTime < times.isha);
      highlight("cisya", nowTime >= times.isha);

      const waktuAzan = ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'];
      waktuAzan.forEach(w => {
        if (nowTime === times[w].slice(0, 5)) {
          $('#ModalAzan').modal('show');
          setTimeout(() => $('#ModalAzan').modal('hide'), 60000);
        }
      });

    } catch (error) {
      console.error("Gagal mengambil data waktu sholat:", error);
    }
  }

  setInterval(waktuSholat, 1000);
</script>

</head>
<body>
  
<!-- Header -->
<div class="header">
  <div class="row">
    <!-- Logo di kiri -->
    <div class="col-sm-3 logo-kiri">
      <img src="img/logo.png" alt="Logo" style="height: 140px;">
    </div>

    <!-- Tanggal di tengah -->
    <div class="col-sm-6 tanggal-tengah">
      <div class="tanggal" id="tanggal"></div>
      <hr class="hr-garis">
      <div class="hijriah" id="hijriah"></div>
    </div>

    <!-- Jam di kanan -->
    <div class="col-sm-3 jam-kanan">
      <div class="jam" id="jam"></div>
    </div>
  </div>
</div>

<!-- Modal Azan -->
<div class="modal fade" id="ModalAzan" role="dialog">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header" style="padding:30px 90px;">
        <h2>Memasuki Waktu Azan</h2>
      </div>
      <div class="modal-body text-center">
        <img src="img/azan.jpg" alt="Azan" class="img-fluid">
      </div>
    </div>
  </div>
</div>

<!-- Waktu Sholat -->
<div class="footer">
  <div class="container-fluid text-center">
    <div class="row">
      <div id="csubuh" class="col-sm border m-2">
        <img src="img/moon.png" class="rounded-circle" width="64" height="64">
        <h3>SUBUH</h3>
        <h1><div class="jam2" id="subuh"></div></h1>
      </div>
      <div id="cterbit" class="col-sm border m-2">
        <img src="img/sunrise.png" class="rounded-circle" width="64" height="64">
        <h3>TERBIT</h3>
        <h1><div class="jam2" id="terbit"></div></h1>
      </div>
      <div id="czuhur" class="col-sm border m-2">
        <img src="img/sun.png" class="rounded-circle" width="64" height="64">
        <h3>ZUHUR</h3>
        <h1><div class="jam2" id="zuhur"></div></h1>
      </div>
      <div id="cashar" class="col-sm border m-2">
        <img src="img/sun.png" class="rounded-circle" width="64" height="64">
        <h3>ASHAR</h3>
        <h1><div class="jam2" id="ashar"></div></h1>
      </div>
      <div id="cmaghrib" class="col-sm border m-2">
        <img src="img/sunrise.png" class="rounded-circle" width="64" height="64">
        <h3>MAGHRIB</h3>
        <h1><div class="jam2" id="maghrib"></div></h1>
      </div>
      <div id="cisya" class="col-sm border m-2">
        <img src="img/moon.png" class="rounded-circle" width="64" height="64">
        <h3>ISYA</h3>
        <h1><div class="jam2" id="isya"></div></h1>
      </div>
    </div>
  </div>
</div>
</body>
</html>





